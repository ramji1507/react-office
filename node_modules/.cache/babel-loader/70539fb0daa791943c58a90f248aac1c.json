{"ast":null,"code":"import _classCallCheck from\"E:\\\\react-git\\\\react-office\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\react-git\\\\react-office\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"E:\\\\react-git\\\\react-office\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"E:\\\\react-git\\\\react-office\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"E:\\\\react-git\\\\react-office\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/assertThisInitialized\";import _inherits from\"E:\\\\react-git\\\\react-office\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from'react';import{Col,Row,Container,Button,Spinner,Pagination}from'react-bootstrap';import WooCommerce from'../Api';import{BrowserRouter as Router,Route,Link,Switch}from'react-router-dom';import SideMenu from'./SideMenu';var CategoryPage=/*#__PURE__*/function(_Component){_inherits(CategoryPage,_Component);function CategoryPage(props,state){var _this;_classCallCheck(this,CategoryPage);// console.log(props);\n_this=_possibleConstructorReturn(this,_getPrototypeOf(CategoryPage).call(this,props,state));_this.pageChanged=_this.pageChanged.bind(_assertThisInitialized(_this));_this.state={error:null,isLoaded:false,cat_id:props.match.params.id,currentPage:1,per_page_product:8,total_items:null,items:{}};return _this;}_createClass(CategoryPage,[{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(newProps){var _this2=this;var categoryId=newProps.match.params.id;this.setState({cat_id:categoryId},function(){_this2.getcatData();});}},{key:\"getcatData\",value:function getcatData(page){var that=this;if(page){var page=page;}else{var page=1;}var category_id=this.state.cat_id;WooCommerce.getAsync('products/?page='+page+'&per_page='+that.state.per_page_product+'&category='+category_id).then(function(result){console.log(result);that.setState({isLoaded:true,total_items:result.headers['x-wp-total'],items:JSON.parse(result.toJSON().body)});});}},{key:\"componentDidMount\",value:function componentDidMount(){this.getcatData();}},{key:\"pageChanged\",value:function pageChanged(e){this.setState({currentPage:e.target.text});this.getcatData(e.target.text);}},{key:\"catproductlist\",value:function catproductlist(){return this.state.items.map(function(item){return React.createElement(Col,{key:item.id,xs:3,className:\"product_item\"},React.createElement(\"div\",{key:item.id},React.createElement(\"img\",{width:\"100%\",alt:\"product\",src:item.images[0].src}),React.createElement(Link,{to:\"/product/\".concat(item.id)},React.createElement(\"h4\",null,item.name)),React.createElement(\"h6\",null,\" $\",item.price),React.createElement(Button,{variant:\"outline-primary\",className:\"add_to_cart_btn\"},\"Add to cart\")));});}},{key:\"render\",value:function render(){var all_page=this.state.total_items/this.state.per_page_product;var active=this.state.currentPage;var Pitems=[];//const indexOfLastTodo = this.state.currentPage * this.state.per_page_product;\n// const indexOfFirstTodo = indexOfLastTodo - this.state.per_page_product;\n//  const renderedProduct = this.state.items.slice(indexOfFirstTodo, indexOfLastTodo);\nfor(var number=1;number<=all_page;number++){Pitems.push(React.createElement(Pagination.Item,{key:number,active:number===active},number));}var paginationBasic=React.createElement(\"div\",null,React.createElement(Pagination,{onClick:this.pageChanged},Pitems));if(!this.state.isLoaded){return React.createElement(Spinner,{animation:\"border\",variant:\"primary\"});}return React.createElement(Container,null,React.createElement(Row,null,React.createElement(Col,{xs:3},React.createElement(SideMenu,null)),React.createElement(Col,{xs:9},React.createElement(Row,null,this.catproductlist()))),React.createElement(\"div\",{className:\"page_cont\"},paginationBasic));}}]);return CategoryPage;}(Component);export default CategoryPage;","map":{"version":3,"sources":["E:/react-git/react-office/src/components/CategoryPage.js"],"names":["React","Component","Col","Row","Container","Button","Spinner","Pagination","WooCommerce","BrowserRouter","Router","Route","Link","Switch","SideMenu","CategoryPage","props","state","pageChanged","bind","error","isLoaded","cat_id","match","params","id","currentPage","per_page_product","total_items","items","newProps","categoryId","setState","getcatData","page","that","category_id","getAsync","then","result","console","log","headers","JSON","parse","toJSON","body","e","target","text","map","item","images","src","name","price","all_page","active","Pitems","number","push","paginationBasic","catproductlist"],"mappings":"osBAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,KAA+B,OAA/B,CACA,OAASC,GAAT,CAAcC,GAAd,CAAmBC,SAAnB,CAA8BC,MAA9B,CAAsCC,OAAtC,CAA+CC,UAA/C,KAAiE,iBAAjE,CACA,MAAOC,CAAAA,WAAP,KAAwB,QAAxB,CACA,OAAQC,aAAa,GAAIC,CAAAA,MAAzB,CAAiCC,KAAjC,CAAwCC,IAAxC,CAA8CC,MAA9C,KAA2D,kBAA3D,CACA,MAAOC,CAAAA,QAAP,KAAqB,YAArB,C,GAEMC,CAAAA,Y,sEAEJ,sBAAYC,KAAZ,CAAmBC,KAAnB,CAA0B,8CACzB;AAEC,8EAAMD,KAAN,CAAaC,KAAb,GACA,MAAKC,WAAL,CAAmB,MAAKA,WAAL,CAAiBC,IAAjB,+BAAnB,CACA,MAAKF,KAAL,CAAa,CACbG,KAAK,CAAE,IADM,CAEdC,QAAQ,CAAE,KAFI,CAGbC,MAAM,CAAGN,KAAK,CAACO,KAAN,CAAYC,MAAZ,CAAmBC,EAHf,CAIbC,WAAW,CAAE,CAJA,CAKbC,gBAAgB,CAAE,CALL,CAMbC,WAAW,CAAC,IANC,CAObC,KAAK,CAAE,EAPM,CAAb,CALwB,aAczB,C,qGACyBC,Q,CAAS,iBACjC,GAAIC,CAAAA,UAAU,CAAGD,QAAQ,CAACP,KAAT,CAAeC,MAAf,CAAsBC,EAAvC,CACA,KAAKO,QAAL,CAAc,CAACV,MAAM,CAACS,UAAR,CAAd,CAAmC,UAAM,CACvC,MAAI,CAACE,UAAL,GACD,CAFD,EAIC,C,8CAGQC,I,CAAM,CACf,GAAMC,CAAAA,IAAI,CAAG,IAAb,CACA,GAAID,IAAJ,CAAU,CACR,GAAIA,CAAAA,IAAI,CAAGA,IAAX,CAEF,CAHA,IAGI,CACJ,GAAIA,CAAAA,IAAI,CAAG,CAAX,CACA,CACC,GAAIE,CAAAA,WAAW,CAAG,KAAKnB,KAAL,CAAWK,MAA7B,CACCd,WAAW,CAAC6B,QAAZ,CAAqB,kBAAkBH,IAAlB,CAAuB,YAAvB,CAAoCC,IAAI,CAAClB,KAAL,CAAWU,gBAA/C,CAAgE,YAAhE,CAA6ES,WAAlG,EAA+GE,IAA/G,CAAoH,SAASC,MAAT,CAAiB,CACnIC,OAAO,CAACC,GAAR,CAAYF,MAAZ,EACAJ,IAAI,CAACH,QAAL,CAAc,CACZX,QAAQ,CAAE,IADE,CAEZO,WAAW,CAAEW,MAAM,CAACG,OAAP,CAAe,YAAf,CAFD,CAGZb,KAAK,CAAEc,IAAI,CAACC,KAAL,CAAWL,MAAM,CAACM,MAAP,GAAgBC,IAA3B,CAHK,CAAd,EAKD,CAPD,EAQD,C,6DAImB,CAClB,KAAKb,UAAL,GACC,C,gDACWc,C,CAAG,CAEb,KAAKf,QAAL,CAAc,CAAEN,WAAW,CAAEqB,CAAC,CAACC,MAAF,CAASC,IAAxB,CAAd,EACA,KAAKhB,UAAL,CAAgBc,CAAC,CAACC,MAAF,CAASC,IAAzB,EAED,C,uDACe,CACd,MACI,MAAKhC,KAAL,CAAWY,KAAX,CAAiBqB,GAAjB,CAAqB,SAACC,IAAD,CAAU,CAC7B,MACI,qBAAC,GAAD,EAAK,GAAG,CAAEA,IAAI,CAAC1B,EAAf,CAAmB,EAAE,CAAE,CAAvB,CAA0B,SAAS,CAAC,cAApC,EAEA,2BAAK,GAAG,CAAE0B,IAAI,CAAC1B,EAAf,EAEE,2BAAK,KAAK,CAAC,MAAX,CAAkB,GAAG,CAAC,SAAtB,CAAgC,GAAG,CAAE0B,IAAI,CAACC,MAAL,CAAY,CAAZ,EAAeC,GAApD,EAFF,CAGE,oBAAC,IAAD,EAAM,EAAE,oBAAcF,IAAI,CAAC1B,EAAnB,CAAR,EAAiC,8BAAK0B,IAAI,CAACG,IAAV,CAAjC,CAHF,CAIE,mCAAOH,IAAI,CAACI,KAAZ,CAJF,CAMG,oBAAC,MAAD,EAAQ,OAAO,CAAC,iBAAhB,CAAkC,SAAS,CAAC,iBAA5C,gBANH,CAFA,CADJ,CAeG,CAhBL,CADJ,CAmBD,C,uCACM,CAEP,GAAMC,CAAAA,QAAQ,CAAG,KAAKvC,KAAL,CAAWW,WAAX,CAAyB,KAAKX,KAAL,CAAWU,gBAArD,CACA,GAAI8B,CAAAA,MAAM,CAAG,KAAKxC,KAAL,CAAWS,WAAxB,CACA,GAAIgC,CAAAA,MAAM,CAAG,EAAb,CACA;AACD;AACD;AAEE,IAAK,GAAIC,CAAAA,MAAM,CAAG,CAAlB,CAAqBA,MAAM,EAAIH,QAA/B,CAAyCG,MAAM,EAA/C,CAAmD,CACjDD,MAAM,CAACE,IAAP,CACE,oBAAC,UAAD,CAAY,IAAZ,EAAiB,GAAG,CAAED,MAAtB,CAA8B,MAAM,CAAEA,MAAM,GAAKF,MAAjD,EACGE,MADH,CADF,EAOD,CAEP,GAAME,CAAAA,eAAe,CACnB,+BACE,oBAAC,UAAD,EAAY,OAAO,CAAE,KAAK3C,WAA1B,EAAyCwC,MAAzC,CADF,CADF,CAOQ,GAAI,CAAC,KAAKzC,KAAL,CAAWI,QAAhB,CAA0B,CACxB,MACG,qBAAC,OAAD,EAAS,SAAS,CAAC,QAAnB,CAA4B,OAAO,CAAC,SAApC,EADH,CAGD,CACJ,MACC,qBAAC,SAAD,MACE,oBAAC,GAAD,MACC,oBAAC,GAAD,EAAK,EAAE,CAAE,CAAT,EAEE,oBAAE,QAAF,MAFF,CADD,CAKC,oBAAC,GAAD,EAAK,EAAE,CAAE,CAAT,EACA,oBAAC,GAAD,MACE,KAAKyC,cAAL,EADF,CADA,CALD,CADF,CAYK,2BAAK,SAAS,CAAC,WAAf,EACCD,eADD,CAZL,CADD,CAkBA,C,0BA9HsB5D,S,EAgIzB,cAAec,CAAAA,YAAf","sourcesContent":["import React, {Component} from 'react';\nimport { Col, Row, Container, Button, Spinner, Pagination } from 'react-bootstrap';\nimport WooCommerce from '../Api';\nimport {BrowserRouter as Router, Route, Link, Switch} from 'react-router-dom';\nimport SideMenu from './SideMenu';\n\nclass CategoryPage extends Component \n{\n  constructor(props, state) {\n   // console.log(props);\n   \n    super(props, state);\n    this.pageChanged = this.pageChanged.bind(this);\n    this.state = {\n    error: null,\n\t  isLoaded: false,\n    cat_id : props.match.params.id,\n    currentPage: 1,\n    per_page_product: 8,\n    total_items:null,\n    items: {}\n    };\n  }\n  componentWillReceiveProps(newProps){\n    var categoryId = newProps.match.params.id;\n    this.setState({cat_id:categoryId}, () => {\n      this.getcatData();\n    });\n    \n    }\n  \n\n  getcatData(page) {\n    const that = this;\n    if (page) {\n      var page = page;\n     \n   }else{\n    var page = 1;\n   }\n     var category_id = this.state.cat_id;\n      WooCommerce.getAsync('products/?page='+page+'&per_page='+that.state.per_page_product+'&category='+category_id).then(function(result) {\n        console.log(result);\n        that.setState({\n          isLoaded: true,\n          total_items: result.headers['x-wp-total'],\n          items: JSON.parse(result.toJSON().body)\n        });\n      });\n    }\n  \n    \n\n    componentDidMount() {\n      this.getcatData();\n      }\n      pageChanged(e) {\n\n        this.setState({ currentPage: e.target.text });\n        this.getcatData(e.target.text);\n    \n      }\n      catproductlist(){\n        return (\n            this.state.items.map((item) => {\n              return (\n                  <Col key={item.id} xs={3} className=\"product_item\"> \n\n                  <div key={item.id}>\n                   \n                    <img width=\"100%\" alt=\"product\" src={item.images[0].src} />\n                    <Link to={`/product/${item.id}`}><h4>{item.name}</h4></Link>\n                    <h6> ${item.price}</h6>\n                   \n                     <Button variant=\"outline-primary\" className=\"add_to_cart_btn\">Add to cart</Button>\n                  \n                      </div>\n                  </Col>\n                 \n                 );\n                })    \n        );\n      }\n    render() {\n        \n      const all_page = this.state.total_items / this.state.per_page_product;\n      let active = this.state.currentPage;\n      let Pitems = [];   \n      //const indexOfLastTodo = this.state.currentPage * this.state.per_page_product;\n     // const indexOfFirstTodo = indexOfLastTodo - this.state.per_page_product;\n    //  const renderedProduct = this.state.items.slice(indexOfFirstTodo, indexOfLastTodo);\n     \n      for (let number = 1; number <= all_page; number++) {\n        Pitems.push(\n          <Pagination.Item key={number} active={number === active}>\n            {number}\n          </Pagination.Item>\n          \n          ,\n        );\n      }\n\nconst paginationBasic = (\n  <div>\n    <Pagination onClick={this.pageChanged} >{Pitems}</Pagination>\n   \n  </div>\n);\n\n        if (!this.state.isLoaded) {\n          return (\n             <Spinner animation=\"border\" variant=\"primary\" />\n          );\n        }\n     return(\n      <Container>\n        <Row>\n         <Col xs={3}>\n      \n           < SideMenu />\n         </Col>\n         <Col xs={9}>\n         <Row>\n          {this.catproductlist()}\n      </Row>\n      </Col>\n       </Row>        \n           <div className=\"page_cont\">\n           {paginationBasic}\n          </div>  \n        </Container>\n      );\n    }\n  }\n  export default CategoryPage;"]},"metadata":{},"sourceType":"module"}