{"ast":null,"code":"import _classCallCheck from\"E:\\\\react-git\\\\react-office\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"E:\\\\react-git\\\\react-office\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"E:\\\\react-git\\\\react-office\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"E:\\\\react-git\\\\react-office\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/getPrototypeOf\";import _inherits from\"E:\\\\react-git\\\\react-office\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import React,{Component}from\"react\";import axios from'axios';import{Col,Row,Container,Button,Spinner,Table}from'react-bootstrap';import NumericInput from'react-numeric-input';import{cartRoot,removeFromCart,getCartTotals,qtychangeCart}from\"../actions\";var Cart=/*#__PURE__*/function(_Component){_inherits(Cart,_Component);function Cart(props){var _this;_classCallCheck(this,Cart);_this=_possibleConstructorReturn(this,_getPrototypeOf(Cart).call(this,props));// this.handleInputChange = this.handleInputChange.bind(this);\n_this.state={isLoaded:false,error:null,totals:{},cart:[]};return _this;}_createClass(Cart,[{key:\"getAllCart\",value:function getAllCart(){var that=this;var token=localStorage.getItem('token');var config={data:{'thumb':true},headers:{'Content-Type':'application/json','Authorization':'Bearer '+token}};return axios.get(cartRoot+'get-cart',config).then(function(res){//console.log(res);\nthat.setState({isLoaded:true,cart:res.data});return res.data;}).catch(function(err){console.log('xxxxxxxxx xxxxxxxxxxxxx error '+err);});}},{key:\"qtyChanged\",value:function qtyChanged(qty,key){var _this2=this;//qtychangeCart(qty, key);\nqtychangeCart(qty,key).then(function(result){_this2.getAllCart().then(function(result){_this2.setState({cart:result,isLoaded:true});});getCartTotals().then(function(result){_this2.setState({totals:result});});});}},{key:\"removeitem\",value:function removeitem(key){var _this3=this;removeFromCart(key).then(function(result){_this3.getAllCart().then(function(result){_this3.setState({cart:result,isLoaded:true});});getCartTotals().then(function(result){_this3.setState({totals:result});});});}},{key:\"componentDidMount\",value:function componentDidMount(){var _this4=this;this.getAllCart();getCartTotals().then(function(result){_this4.setState({totals:result});});}},{key:\"cartList\",value:function cartList(){var _this5=this;return Object.values(this.state.cart).map(function(item){return React.createElement(\"tr\",{key:item.key,id:\"{item.product_id}\"},React.createElement(\"td\",{className:\"cart_product\"}),React.createElement(\"td\",{className:\"cart_product\"},item.product_name),React.createElement(\"td\",{className:\"cart_product\"},item.product_price),React.createElement(\"td\",{className:\"cart_product\"},React.createElement(Button,{variant:\"info\",onClick:function onClick(){_this5.qtyChanged(item.quantity-1,item.key);}},\"-\"),item.quantity,React.createElement(Button,{variant:\"info\",onClick:function onClick(){_this5.qtyChanged(item.quantity+1,item.key);}},\"+\")),React.createElement(\"td\",{className:\"cart_product\"},item.line_total),React.createElement(\"td\",{className:\"cart_product\"},React.createElement(Button,{variant:\"danger\",onClick:function onClick(){_this5.removeitem(item.key);}},\"X\")));});}},{key:\"cartTotals\",value:function cartTotals(){return React.createElement(\"div\",{className:\"total_box\"},React.createElement(Row,null,React.createElement(Col,{xs:3},React.createElement(\"h5\",null,\"Subtotal\")),React.createElement(Col,{xs:9},this.state.totals.subtotal),React.createElement(Col,{xs:3},React.createElement(\"h5\",null,\"Total\")),React.createElement(Col,{xs:9},this.state.totals.cart_contents_total)));}},{key:\"render\",value:function render(){if(!this.state.isLoaded){return React.createElement(Spinner,{animation:\"border\",variant:\"primary\"});}return React.createElement(\"div\",null,React.createElement(Container,null,React.createElement(\"div\",{className:\"table-responsive cart_info\"},React.createElement(Table,{striped:true,bordered:true,hover:true,className:\"table table-condensed\"},React.createElement(\"thead\",null,React.createElement(\"tr\",{className:\"cart_menu\"},React.createElement(\"td\",{className:\"image\"},\"Item\"),React.createElement(\"td\",{className:\"name\"},\"Name\"),React.createElement(\"td\",{className:\"price\"},\"Price\"),React.createElement(\"td\",{className:\"quantity\"},\"Quantity\"),React.createElement(\"td\",{className:\"total\"},\"Total\"),React.createElement(\"td\",null))),React.createElement(\"tbody\",null,this.cartList()))),this.cartTotals()));}}]);return Cart;}(Component);export default Cart;","map":{"version":3,"sources":["E:/react-git/react-office/src/components/Cart.js"],"names":["React","Component","axios","Col","Row","Container","Button","Spinner","Table","NumericInput","cartRoot","removeFromCart","getCartTotals","qtychangeCart","Cart","props","state","isLoaded","error","totals","cart","that","token","localStorage","getItem","config","data","headers","get","then","res","setState","catch","err","console","log","qty","key","result","getAllCart","Object","values","map","item","product_name","product_price","qtyChanged","quantity","line_total","removeitem","subtotal","cart_contents_total","cartList","cartTotals"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport axios from 'axios';\nimport { Col, Row, Container, Button, Spinner, Table} from 'react-bootstrap';\nimport NumericInput from 'react-numeric-input';\nimport { cartRoot, removeFromCart, getCartTotals, qtychangeCart } from \"../actions\";\nclass Cart extends Component {\n  constructor(props) {\n    super(props);\n   // this.handleInputChange = this.handleInputChange.bind(this);\n    this.state = {\n\t  isLoaded:false,\n    error: null,\n    totals:{},\n\t  cart: []\n    };\n  }\n  \n  \n  \n   getAllCart(){\n   \tconst that = this;\n     var token = localStorage.getItem('token');\n\n     var config = {\n        data: {\n          'thumb' : true\n        },\n         headers: {\n                 'Content-Type':'application/json',\n                 'Authorization': 'Bearer ' + token,\n                },\n                };\n\n return axios.get(cartRoot+'get-cart',config)\n            .then(res => {\n              //console.log(res);\n\t\t       that.setState({\n\t\t          isLoaded: true,\n              cart: res.data,\n            })\n           \n            return res.data;\n           \n            }).catch(err=>{\n             console.log('xxxxxxxxx xxxxxxxxxxxxx error ' + err);\n            })\n\n   }\n\n   qtyChanged(qty, key) {\n    //qtychangeCart(qty, key);\n    qtychangeCart(qty, key).then(result => {\n      this.getAllCart().then(result => {\n          this.setState({ cart: result, isLoaded: true });\n      });\n      getCartTotals().then(result => {\n        this.setState({ totals: result});\n      });\n    });\n  }\n\n  removeitem(key) {\n    removeFromCart(key).then(result => {\n      this.getAllCart().then(result => {\n          this.setState({ cart: result, isLoaded: true });\n      });\n      getCartTotals().then(result => {\n        this.setState({ totals: result});\n      });\n    \n    });\n  }\n  \n\tcomponentDidMount(){\n     this.getAllCart();\n     getCartTotals().then(result => {\n      this.setState({ totals: result});\n    });\n   \n\t}\n\n \n\ncartList(){\n    return (\n       Object.values(this.state.cart).map((item) => {\n          return (\n        <tr key={item.key} id=\"{item.product_id}\">\n          <td className=\"cart_product\">\n\t\t\t\t\n\t\t\t</td>\n      <td className=\"cart_product\">\n      {item.product_name}\n\t\t\t</td>\t\n      <td className=\"cart_product\">\n      {item.product_price}\n\t\t\t</td>\t\n      <td className=\"cart_product\">\n      <Button variant=\"info\" onClick={() => {\n         this.qtyChanged(item.quantity-1, item.key)\n    }}>-</Button>\n     \n\t\t\t\t\t{item.quantity}\n          <Button variant=\"info\" onClick={() => {\n         this.qtyChanged(item.quantity+1, item.key)\n    }}>+</Button>\n     \n\t\t\t</td>\t\n      <td className=\"cart_product\">\n\t\t\t\t\t{item.line_total}\n\t\t\t</td>\t\n\n       <td className=\"cart_product\">\n       <Button variant=\"danger\" onClick={() => {\n         this.removeitem(item.key)\n    }}>X</Button>\n\t\t\t</td>\t\t\t\t\t\n\t\t</tr>\n             \n             );\n      })    \n    )\n  }\n\n\n  cartTotals(){\n  \n      return (\n        <div className=\"total_box\"> \n        <Row>\n        <Col xs={3}>\n            <h5>Subtotal</h5>\n            </Col>\n            <Col xs={9}>\n            {this.state.totals.subtotal}\n            </Col>\n            <Col xs={3}>\n            <h5>Total</h5>\n            </Col>\n            <Col xs={9}>\n            {this.state.totals.cart_contents_total}\n            </Col>\n        </Row>        \n      </div> \n        )\n       \n  }\n  \n  render() {\n\t  if (!this.state.isLoaded) {\n            return (\n               <Spinner animation=\"border\" variant=\"primary\" />\n            );\n         }\n    return (\n      <div>\n        <Container>\n\t\t<div className=\"table-responsive cart_info\">\n\t\t\t\t\t<Table striped bordered hover className=\"table table-condensed\">\n\t\t\t\t\t\t<thead>\n\t\t\t\t\t\t\t<tr className=\"cart_menu\">\n\t\t\t\t\t\t\t\t<td className=\"image\">Item</td>\n\t\t\t\t\t\t\t\t<td className=\"name\">Name</td>\n\t\t\t\t\t\t\t\t<td className=\"price\">Price</td>\n\t\t\t\t\t\t\t\t<td className=\"quantity\">Quantity</td>\n\t\t\t\t\t\t\t\t<td className=\"total\">Total</td>\n\t\t\t\t\t\t\t\t<td></td>\n\t\t\t\t\t\t\t</tr>\n\t\t\t\t\t\t</thead>\n\t\t\t\t\t\t<tbody>\n\t\t\t\t\t\t\t{this.cartList()}\n             \n\t\t\t\t\t\t</tbody>\n\t\t\t\t\t</Table>\n\t\t\t\t</div>\n        {this.cartTotals()}\n       </Container>\n      </div>\n    );\n  }\n}\nexport default Cart;"]},"metadata":{},"sourceType":"module"}