{"ast":null,"code":"import React, { useState } from 'react';\nimport WooCommerce from './Api';\nimport axios from 'axios';\nconst cartRoot = WooCommerce.url + '/wp-json/cocart/v1/';\nexport function postData(endpoint, request_data) {\n  var token = localStorage.getItem('token');\n  const headers = {\n    'Content-Type': 'application/json',\n    'Authorization': 'Bearer ' + token\n  };\n  return axios.post(cartRoot + endpoint, request_data, {\n    headers: headers\n  }).then(res => {\n    return console.log(res);\n  }).catch(err => {\n    return console.log(err);\n  });\n}\n\nconst addToCart = ({\n  product_id,\n  quantity\n}) => {\n  var req = {\n    product_id: product_id,\n    quantity: quantity\n  }; // postData('add-item', req);\n  //  let cart_products = [];\n  //  if(localStorage.getItem('cart_products')){\n  //   cart_products = JSON.parse(localStorage.getItem('cart_products'));\n  //  }\n  //  cart_products.push({'productId' : product_id + 1, quantity : quantity});\n  //  localStorage.setItem('cart_products', JSON.stringify(cart_products));\n  //  var carti = localStorage.getItem('cart_products');\n\n  let productsString = localStorage.getItem('products');\n  let products = [];\n\n  if (productsString) {\n    products = JSON.parse(productsString);\n  }\n\n  products.concat([req]);\n  localStorage.setItem('products', JSON.stringify(products)); // set products as an array\n\n  console.log(products);\n};\n\nconst removeFromCart = cart_item_key => {\n  var token = localStorage.getItem('token');\n  console.log(cart_item_key);\n  const headers = {\n    'Authorization': 'Bearer ' + token\n  };\n  var req = {\n    cart_item_key: cart_item_key\n  };\n  return axios.delete(cartRoot + 'item', {\n    data: {\n      cart_item_key: cart_item_key\n    },\n    headers: headers\n  }).then(res => {\n    console.log(res);\n    return res;\n  }).catch(err => {\n    console.log(err);\n    return err;\n  });\n};\n\nconst getCartTotals = () => {\n  var token = localStorage.getItem('token');\n  var config = {\n    headers: {\n      'Content-Type': 'application/json',\n      'Authorization': 'Bearer ' + token\n    }\n  };\n  return axios.get(cartRoot + 'totals', config).then(res => {\n    //console.log(res.data);\n    return res.data;\n  }).catch(err => {\n    return err;\n  });\n};\n\nconst qtychangeCart = (qty, cart_item_key) => {\n  var token = localStorage.getItem('token'); //console.log(cart_item_key);\n\n  const headers = {\n    'Content-Type': 'application/json',\n    'Authorization': 'Bearer ' + token\n  };\n  var req = {\n    cart_item_key: cart_item_key,\n    quantity: qty,\n    refresh_totals: true\n  };\n  return axios.post(cartRoot + 'item', req, {\n    headers: headers\n  }).then(res => {\n    console.log(res);\n    return res;\n  }).catch(err => {\n    console.log(err);\n    return err;\n  });\n};\n\nexport { cartRoot, addToCart, removeFromCart, getCartTotals, qtychangeCart };","map":{"version":3,"sources":["E:/react-git/react-office/src/actions.js"],"names":["React","useState","WooCommerce","axios","cartRoot","url","postData","endpoint","request_data","token","localStorage","getItem","headers","post","then","res","console","log","catch","err","addToCart","product_id","quantity","req","productsString","products","JSON","parse","concat","setItem","stringify","removeFromCart","cart_item_key","delete","data","getCartTotals","config","get","qtychangeCart","qty","refresh_totals"],"mappings":"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","sourcesContent":["import React, { useState } from 'react';\nimport WooCommerce from './Api';\nimport axios from 'axios';\nconst cartRoot = WooCommerce.url+'/wp-json/cocart/v1/';\nexport function postData(endpoint, request_data){\n    var token = localStorage.getItem('token');\n    const headers = {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + token\n      }\n\n    return axios.post(cartRoot + endpoint, request_data , {\n        headers: headers\n      })\n    .then(res => {\n     return console.log(res);\n    }).catch(err=>{\n     return console.log(err);\n    })  \n   \n}\nconst addToCart = ({ product_id, quantity }) => {\n    var req = {product_id:product_id,quantity:quantity}\n  // postData('add-item', req);\n  //  let cart_products = [];\n  //  if(localStorage.getItem('cart_products')){\n  //   cart_products = JSON.parse(localStorage.getItem('cart_products'));\n  //  }\n  //  cart_products.push({'productId' : product_id + 1, quantity : quantity});\n  //  localStorage.setItem('cart_products', JSON.stringify(cart_products));\n  //  var carti = localStorage.getItem('cart_products');\n  let productsString = localStorage.getItem('products')\n  let products = []\n  if(productsString){\n      products = JSON.parse(productsString)\n  } \n  products.concat([req])\n  localStorage.setItem('products', JSON.stringify(products)) // set products as an array\n      console.log(products);\n  }\n\n\n  const removeFromCart = (cart_item_key) => {\n    var token = localStorage.getItem('token');\n    console.log(cart_item_key);\n    const headers = {\n        'Authorization': 'Bearer ' + token\n      }\n      var req = {cart_item_key:cart_item_key}\n    return axios.delete(cartRoot +'item',{ data: { cart_item_key: cart_item_key },\n        headers: headers\n      })\n    .then(res => {\n    console.log(res);\n       return res;\n    }).catch(err=>{\n     console.log(err);\n        return err;\n    })  \n}\n\nconst getCartTotals = () => {\n    var token = localStorage.getItem('token');\n    var config = {\n        headers: {\n                'Content-Type':'application/json',\n                'Authorization': 'Bearer ' + token,\n               }\n               };\n  return axios.get(cartRoot +'totals',config)\n    .then(res => {\n      //console.log(res.data);\n      return res.data;\n    }).catch(err=>{\n      return err;\n    })  \n}\n\n\nconst qtychangeCart = (qty, cart_item_key) => {\n  var token = localStorage.getItem('token');\n  //console.log(cart_item_key);\n  const headers = {\n      'Content-Type':'application/json',\n      'Authorization': 'Bearer ' + token\n    }\n  var req = {cart_item_key:cart_item_key, quantity:qty, refresh_totals: true}\n  return axios.post(cartRoot +'item', req, {\n      headers: headers\n    })\n  .then(res => {\n    console.log(res);\n    return res;\n   \n  }).catch(err=>{\n    console.log(err);\n    return err;\n  })  \n}\n\n\n  export { cartRoot, addToCart, removeFromCart, getCartTotals, qtychangeCart };"]},"metadata":{},"sourceType":"module"}