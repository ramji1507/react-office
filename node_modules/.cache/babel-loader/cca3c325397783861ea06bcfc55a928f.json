{"ast":null,"code":"import React,{useState}from'react';import WooCommerce from'./Api';import axios from'axios';var cartRoot=WooCommerce.url+'/wp-json/cocart/v1/';export function postData(endpoint,request_data){var token=localStorage.getItem('token');var headers={'Content-Type':'application/json','Authorization':'Bearer '+token};return axios.post(cartRoot+endpoint,request_data,{headers:headers}).then(function(res){return console.log(res);}).catch(function(err){return console.log(err);});}var addToCart=function addToCart(_ref){var product_id=_ref.product_id,quantity=_ref.quantity;var req={product_id:product_id,quantity:quantity};// postData('add-item', req);\n//  let cart_products = [];\n//  if(localStorage.getItem('cart_products')){\n//   cart_products = JSON.parse(localStorage.getItem('cart_products'));\n//  }\n//  cart_products.push({'productId' : product_id + 1, quantity : quantity});\n//  localStorage.setItem('cart_products', JSON.stringify(cart_products));\n//  var carti = localStorage.getItem('cart_products');\nvar productsString=localStorage.getItem('products');var products=[];if(productsString){products=JSON.parse(productsString);}products.concat([req]);localStorage.setItem('products',JSON.stringify(products));// set products as an array\nconsole.log(products);};var removeFromCart=function removeFromCart(cart_item_key){var token=localStorage.getItem('token');console.log(cart_item_key);var headers={'Authorization':'Bearer '+token};var req={cart_item_key:cart_item_key};return axios.delete(cartRoot+'item',{data:{cart_item_key:cart_item_key},headers:headers}).then(function(res){console.log(res);return res;}).catch(function(err){console.log(err);return err;});};var getCartTotals=function getCartTotals(){var token=localStorage.getItem('token');var config={headers:{'Content-Type':'application/json','Authorization':'Bearer '+token}};return axios.get(cartRoot+'totals',config).then(function(res){//console.log(res.data);\nreturn res.data;}).catch(function(err){return err;});};var qtychangeCart=function qtychangeCart(qty,cart_item_key){var token=localStorage.getItem('token');//console.log(cart_item_key);\nvar headers={'Content-Type':'application/json','Authorization':'Bearer '+token};var req={cart_item_key:cart_item_key,quantity:qty,refresh_totals:true};return axios.post(cartRoot+'item',req,{headers:headers}).then(function(res){console.log(res);return res;}).catch(function(err){console.log(err);return err;});};export{cartRoot,addToCart,removeFromCart,getCartTotals,qtychangeCart};","map":{"version":3,"sources":["E:/react-git/react-office/src/actions.js"],"names":["React","useState","WooCommerce","axios","cartRoot","url","postData","endpoint","request_data","token","localStorage","getItem","headers","post","then","res","console","log","catch","err","addToCart","product_id","quantity","req","productsString","products","JSON","parse","concat","setItem","stringify","removeFromCart","cart_item_key","delete","data","getCartTotals","config","get","qtychangeCart","qty","refresh_totals"],"mappings":"AAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAOC,CAAAA,WAAP,KAAwB,OAAxB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,GAAMC,CAAAA,QAAQ,CAAGF,WAAW,CAACG,GAAZ,CAAgB,qBAAjC,CACA,MAAO,SAASC,CAAAA,QAAT,CAAkBC,QAAlB,CAA4BC,YAA5B,CAAyC,CAC5C,GAAIC,CAAAA,KAAK,CAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAZ,CACA,GAAMC,CAAAA,OAAO,CAAG,CACZ,eAAgB,kBADJ,CAEZ,gBAAiB,UAAYH,KAFjB,CAAhB,CAKA,MAAON,CAAAA,KAAK,CAACU,IAAN,CAAWT,QAAQ,CAAGG,QAAtB,CAAgCC,YAAhC,CAA+C,CAClDI,OAAO,CAAEA,OADyC,CAA/C,EAGNE,IAHM,CAGD,SAAAC,GAAG,CAAI,CACZ,MAAOC,CAAAA,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAP,CACA,CALM,EAKJG,KALI,CAKE,SAAAC,GAAG,CAAE,CACb,MAAOH,CAAAA,OAAO,CAACC,GAAR,CAAYE,GAAZ,CAAP,CACA,CAPM,CAAP,CASH,CACD,GAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,MAA8B,IAA3BC,CAAAA,UAA2B,MAA3BA,UAA2B,CAAfC,QAAe,MAAfA,QAAe,CAC5C,GAAIC,CAAAA,GAAG,CAAG,CAACF,UAAU,CAACA,UAAZ,CAAuBC,QAAQ,CAACA,QAAhC,CAAV,CACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAIE,CAAAA,cAAc,CAAGd,YAAY,CAACC,OAAb,CAAqB,UAArB,CAArB,CACA,GAAIc,CAAAA,QAAQ,CAAG,EAAf,CACA,GAAGD,cAAH,CAAkB,CACdC,QAAQ,CAAGC,IAAI,CAACC,KAAL,CAAWH,cAAX,CAAX,CACH,CACDC,QAAQ,CAACG,MAAT,CAAgB,CAACL,GAAD,CAAhB,EACAb,YAAY,CAACmB,OAAb,CAAqB,UAArB,CAAiCH,IAAI,CAACI,SAAL,CAAeL,QAAf,CAAjC,EAA2D;AACvDT,OAAO,CAACC,GAAR,CAAYQ,QAAZ,EACH,CAlBH,CAqBE,GAAMM,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACC,aAAD,CAAmB,CACxC,GAAIvB,CAAAA,KAAK,CAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAZ,CACAK,OAAO,CAACC,GAAR,CAAYe,aAAZ,EACA,GAAMpB,CAAAA,OAAO,CAAG,CACZ,gBAAiB,UAAYH,KADjB,CAAhB,CAGE,GAAIc,CAAAA,GAAG,CAAG,CAACS,aAAa,CAACA,aAAf,CAAV,CACF,MAAO7B,CAAAA,KAAK,CAAC8B,MAAN,CAAa7B,QAAQ,CAAE,MAAvB,CAA8B,CAAE8B,IAAI,CAAE,CAAEF,aAAa,CAAEA,aAAjB,CAAR,CACjCpB,OAAO,CAAEA,OADwB,CAA9B,EAGNE,IAHM,CAGD,SAAAC,GAAG,CAAI,CACbC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACG,MAAOA,CAAAA,GAAP,CACF,CANM,EAMJG,KANI,CAME,SAAAC,GAAG,CAAE,CACbH,OAAO,CAACC,GAAR,CAAYE,GAAZ,EACG,MAAOA,CAAAA,GAAP,CACH,CATM,CAAP,CAUH,CAjBC,CAmBF,GAAMgB,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,EAAM,CACxB,GAAI1B,CAAAA,KAAK,CAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAZ,CACA,GAAIyB,CAAAA,MAAM,CAAG,CACTxB,OAAO,CAAE,CACD,eAAe,kBADd,CAED,gBAAiB,UAAYH,KAF5B,CADA,CAAb,CAMF,MAAON,CAAAA,KAAK,CAACkC,GAAN,CAAUjC,QAAQ,CAAE,QAApB,CAA6BgC,MAA7B,EACJtB,IADI,CACC,SAAAC,GAAG,CAAI,CACX;AACA,MAAOA,CAAAA,GAAG,CAACmB,IAAX,CACD,CAJI,EAIFhB,KAJE,CAII,SAAAC,GAAG,CAAE,CACZ,MAAOA,CAAAA,GAAP,CACD,CANI,CAAP,CAOD,CAfD,CAkBA,GAAMmB,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACC,GAAD,CAAMP,aAAN,CAAwB,CAC5C,GAAIvB,CAAAA,KAAK,CAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAZ,CACA;AACA,GAAMC,CAAAA,OAAO,CAAG,CACZ,eAAe,kBADH,CAEZ,gBAAiB,UAAYH,KAFjB,CAAhB,CAIA,GAAIc,CAAAA,GAAG,CAAG,CAACS,aAAa,CAACA,aAAf,CAA8BV,QAAQ,CAACiB,GAAvC,CAA4CC,cAAc,CAAE,IAA5D,CAAV,CACA,MAAOrC,CAAAA,KAAK,CAACU,IAAN,CAAWT,QAAQ,CAAE,MAArB,CAA6BmB,GAA7B,CAAkC,CACrCX,OAAO,CAAEA,OAD4B,CAAlC,EAGNE,IAHM,CAGD,SAAAC,GAAG,CAAI,CACXC,OAAO,CAACC,GAAR,CAAYF,GAAZ,EACA,MAAOA,CAAAA,GAAP,CAED,CAPM,EAOJG,KAPI,CAOE,SAAAC,GAAG,CAAE,CACZH,OAAO,CAACC,GAAR,CAAYE,GAAZ,EACA,MAAOA,CAAAA,GAAP,CACD,CAVM,CAAP,CAWD,CAnBD,CAsBE,OAASf,QAAT,CAAmBgB,SAAnB,CAA8BW,cAA9B,CAA8CI,aAA9C,CAA6DG,aAA7D","sourcesContent":["import React, { useState } from 'react';\nimport WooCommerce from './Api';\nimport axios from 'axios';\nconst cartRoot = WooCommerce.url+'/wp-json/cocart/v1/';\nexport function postData(endpoint, request_data){\n    var token = localStorage.getItem('token');\n    const headers = {\n        'Content-Type': 'application/json',\n        'Authorization': 'Bearer ' + token\n      }\n\n    return axios.post(cartRoot + endpoint, request_data , {\n        headers: headers\n      })\n    .then(res => {\n     return console.log(res);\n    }).catch(err=>{\n     return console.log(err);\n    })  \n   \n}\nconst addToCart = ({ product_id, quantity }) => {\n    var req = {product_id:product_id,quantity:quantity}\n  // postData('add-item', req);\n  //  let cart_products = [];\n  //  if(localStorage.getItem('cart_products')){\n  //   cart_products = JSON.parse(localStorage.getItem('cart_products'));\n  //  }\n  //  cart_products.push({'productId' : product_id + 1, quantity : quantity});\n  //  localStorage.setItem('cart_products', JSON.stringify(cart_products));\n  //  var carti = localStorage.getItem('cart_products');\n  let productsString = localStorage.getItem('products')\n  let products = []\n  if(productsString){\n      products = JSON.parse(productsString)\n  } \n  products.concat([req])\n  localStorage.setItem('products', JSON.stringify(products)) // set products as an array\n      console.log(products);\n  }\n\n\n  const removeFromCart = (cart_item_key) => {\n    var token = localStorage.getItem('token');\n    console.log(cart_item_key);\n    const headers = {\n        'Authorization': 'Bearer ' + token\n      }\n      var req = {cart_item_key:cart_item_key}\n    return axios.delete(cartRoot +'item',{ data: { cart_item_key: cart_item_key },\n        headers: headers\n      })\n    .then(res => {\n    console.log(res);\n       return res;\n    }).catch(err=>{\n     console.log(err);\n        return err;\n    })  \n}\n\nconst getCartTotals = () => {\n    var token = localStorage.getItem('token');\n    var config = {\n        headers: {\n                'Content-Type':'application/json',\n                'Authorization': 'Bearer ' + token,\n               }\n               };\n  return axios.get(cartRoot +'totals',config)\n    .then(res => {\n      //console.log(res.data);\n      return res.data;\n    }).catch(err=>{\n      return err;\n    })  \n}\n\n\nconst qtychangeCart = (qty, cart_item_key) => {\n  var token = localStorage.getItem('token');\n  //console.log(cart_item_key);\n  const headers = {\n      'Content-Type':'application/json',\n      'Authorization': 'Bearer ' + token\n    }\n  var req = {cart_item_key:cart_item_key, quantity:qty, refresh_totals: true}\n  return axios.post(cartRoot +'item', req, {\n      headers: headers\n    })\n  .then(res => {\n    console.log(res);\n    return res;\n   \n  }).catch(err=>{\n    console.log(err);\n    return err;\n  })  \n}\n\n\n  export { cartRoot, addToCart, removeFromCart, getCartTotals, qtychangeCart };"]},"metadata":{},"sourceType":"module"}